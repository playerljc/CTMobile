!function(){function e(e){var t=["com.chinact.angular.directive.ctLazyImageSrc","com.chinact.angular.directive.ctLazyBackground","com.chinact.angular.directive.ctSilderTop"];return{register:function(n,r){for(var i=0,a=t.length;i<a;i++)!function(r){try{e.namespace(t[r]).register(n)}catch(e){console.log(e)}}(i);r&&r()}}}"function"==typeof define&&(define.amd||define.cmd)?define("AngularDirectiveManager",["Tool"],function(t){return e(t)}):window.AngularDirectiveManager=e(Tool)}(),function(){function e(e){var t=["com.chinact.angular.filter.hexToDec","com.chinact.angular.filter.decToHex","com.chinact.angular.filter.suffix","com.chinact.angular.filter.prefix"];return{register:function(n,r){for(var i=0,a=t.length;i<a;i++)!function(r){try{e.namespace(t[r]).register(n)}catch(e){console.log(e)}}(i);r&&r()}}}"function"==typeof define&&(define.amd||define.cmd)?define("AngularFilterManager",["Tool"],function(t){return e(t)}):window.AngularFilterManager=e(Tool)}(),function(){function e(e){var t=[];return{register:function(n,r){for(var i=0,a=t.length;i<a;i++)!function(r){e.namespace(t[r]).register(n)}(i);r&&r()}}}"function"==typeof define&&(define.cmd||define.amd)?define("AngularServiceManager",["Tool"],function(t){return e(t)}):window.AngularServiceManager=e(Tool)}(),function(e){function t(t,n,r,i,a,o,s){var g={config:function(c){g=e(g,t,n,r,i,c.mode||"web",{supportAngular:c.supportAngular||!1,appName:"ctmobile",angular:n.angular},{supportCordova:c.supportCordova||!1},c.linkCaptureReload||!1,a,o,s,c.paths||{})}};return g}"function"==typeof define&&(define.amd||define.cmd)?define(["jquery","exports","require","AngularDirectiveManager","AngularFilterManager","AngularServiceManager"],function(e,n,r,i,a,o){return t(e,window,n,r,i,a,o)}):CtMobile=t(jQuery,window,{},{},AngularDirectiveManager,AngularFilterManager,AngularServiceManager)}(function(e,t,n,r,i,a,o,s,g,c,u,l,d){function f(r){function i(t){e.extend(t,e.Page);var n,i=(typeof t).toLowerCase(),a=h(s,"ct-data-mode");return"function"===i?n=t:"undefined"===i&&(n=U),-1!==a.toLowerCase().indexOf("singleinstance")?(e.getSingleInstance(s)||(H[s]=new n(r)),H[s]):new n(r)}var a,o=t.Deferred(),s=r.substring(0,r.lastIndexOf("_"));if(a="function"==typeof define&&(define.amd||define.cmd)?J(s):e.namespaceToObj(n,s))o.resolve(i(a));else{var g=e.router.getResPath(s);g?e.router.loadAsyncScriptAndCss(g).done(function(){a=e.namespaceToObj(n,s),o.resolve(i(a))}):o.resolve(i(a))}return o.promise()}function p(e){return-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),D(T[e])}function h(e,t){var n=p(e),r=n.getAttribute(t);return"ct-data-mode"!==t||r||(r="standard"),r}function v(e){-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?")));for(var t=-1,n=0,r=C.length;n<r;n++)if(C[n].getPageId()===e){t=n;break}return t}function m(e,n,r){t(e).trigger(n,r||[])}function b(){R||(R=!0,E=n.document.body,j=D("<div class='ct-page-mask'><div opt='animation' class='la-ball-circus la-dark' style='color:#3e98f0;'><div></div><div></div><div></div><div></div><div></div></div></div>"),E.appendChild(n.document.createDocumentFragment().appendChild(j)),console.time("总用时"),t.when(x(),P()).done(function(){console.timeEnd("总用时"),m(n.document,"pageBeforeChange",[e.getUrlParam(n.location.hash)]),f(e.getFirstId()).done(function(e){e.start(0)})}))}function y(n){var r=t.Deferred(),i=[];return console.time("预加载Ajax用时"),I(n.querySelectorAll("a[ct-data-preload=true][href]"),function(n,r){var a=n.getAttribute("ct-data-ajax"),o=n.getAttribute("href");-1===o.indexOf("#")&&a&&"false"===a||i.push(t.ajax({dataType:"text",url:o,success:function(t){var n=e.getUrlParam(o);T[n.pageId]=A(t)},error:function(e,t,n){}}))}),0!==i.length?t.when.apply(this,i).done(function(){console.timeEnd("预加载Ajax用时"),r.resolve()}).fail(function(){r.reject()}):r.resolve(),r.promise()}function P(){var r=t.Deferred();return console.time("捕获a标签用时:"),n.document.addEventListener("click",function(t){var n=t.target;if(n&&("a"===n.tagName.toLocaleLowerCase()||(n=n.getParentElementByTag("a")))){var r=n.getAttribute("href"),i=n.getAttribute("ct-data-ajax");if((!r||-1!==r.indexOf("#")||!i||"false"!==i)&&r&&!(r.length<=1))return e.startPage(r,{reload:"true"===n.getAttribute("ct-reload")||g}),t.preventDefault(),!1}}),console.timeEnd("捕获a标签用时:"),r.resolve(),r.promise()}function x(){var e=t.Deferred();console.time("初始化本地模板用时:");var r=[];return I(E.querySelectorAll("div[ct-data-role='page']"),function(){T[this.getAttribute("id")]=this.outerHTML,r.push(y(this)),this.parentNode.removeChild(this)}),t.when.apply(this,r).done(function(){"mulitview"===a?n.mulitview.addTemplateDB(function(){console.timeEnd("初始化本地模板用时:"),e.resolve()},function(){},T):(console.timeEnd("初始化本地模板用时:"),e.resolve())}),e.promise()}function w(t){e.router.go(t)}function O(){return!!(k&&k.supportAngular&&k.appName&&k.angular)}function A(e){var n;if(e=e.trim(),new RegExp("(<[^>]+\\bct-data-role=[\"']?page[\"']?[^>]*>)").test(e)){var r=e.split(/<\/?body[^>]*>/gim);n=t((0===(r||[]).length?"":r.length>1?r[1]:r[0])||"")[0]}return n?n.outerHTML:""}function D(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}function I(e,t){for(var n=0,r=e.length;n<r;n++)t&&t.call(e[n],e[n],n)}var B=500,M=!0,R=!1,T={},L=0,C=[],E=null,S=null,k=o,_=s,j=null,q=!1,F="material",H=null,N=null,$=null,J=i,U=function(){function r(){var t=this;if(this._pDom=D(T[this.pageId]),this._pDom.setAttribute("id",this.id),I(this._pDom.querySelectorAll("[id]"),function(){this.setAttribute("id",t.id+this.getAttribute("id"))}),I(this._pDom.querySelectorAll("label[for]"),function(){this.setAttribute("for",t.id+this.getAttribute("for"))}),I(this._pDom.querySelectorAll("input[list]"),function(){this.setAttribute("list",t.id+this.getAttribute("list"))}),I(this._pDom.querySelectorAll("datalist[id]"),function(){this.setAttribute("id",t.id+this.getAttribute("id"))}),this.getPageDOM().getAttribute("ct-data-transition")&&(this.transition=this.getPageDOM().getAttribute("ct-data-transition")),o.call(this),this.getPageDOM().getAttribute("ct-data-intentfilter-action")&&e.registerReceiver(this.pageReceiver,{action:this.getPageDOM().getAttribute("ct-data-intentfilter-action"),priority:this.getPageDOM().getAttribute("ct-data-intentfilter-priority")?parseInt(this.getPageDOM().getAttribute("ct-data-intentfilter-priority")):0,categorys:this.getPageDOM().getAttribute("ct-data-intentfilter-categorys")?this.getPageDOM().getAttribute("ct-data-intentfilter-categorys").split(" "):[]}),this._pDom.addEventListener("click",function(e){e.target.getAttribute("ct-data-rel")&&"back"===e.target.getAttribute("ct-data-rel")&&w(-1)},!1),E.appendChild(n.document.createDocumentFragment().appendChild(this._pDom)),O()&&f.call(this)){this._pDom.getAttribute("ct-ng-controller")&&(this._pDom.setAttribute("ng-controller",t.id+this._pDom.getAttribute("ct-ng-controller")),this._pDom.removeAttribute("ct-ng-controller")),I(this._pDom.querySelectorAll("[ct-ng-controller]"),function(){this.setAttribute("ng-controller",t.id+this.getAttribute("ct-ng-controller")),this.removeAttribute("ct-ng-controller")}),m(t.getPageDOM(),"pageAngularInjectorBefore",[S]),l.call(this);var r=t.getPageDOM().innerHTML,i=n.document.createElement("div");i.innerHTML=r,I(i.querySelectorAll("*"),function(){for(var e=0,t=this.attributes.length;e<t;e++)0==this.attributes[e].nodeName.indexOf("ct-ng-")?(this.setAttribute(this.attributes[e].nodeName.substring(3),this.attributes[e].value),this.removeAttribute(this.attributes[e].nodeName)):0==this.attributes[e].nodeName.indexOf("ct-directive-")&&(this.setAttribute(this.attributes[e].nodeName.substring("ct-directive-".length),this.attributes[e].value),this.removeAttribute(this.attributes[e].nodeName)),new RegExp(/\[\[.+\]\]/g).exec(this.attributes[e].value)&&(this.attributes[e].value=this.attributes[e].value.replace(/\[\[/g,"{{"),this.attributes[e].value=this.attributes[e].value.replace(/\]\]/g,"}}"));if(0===this.children.length&&1===this.childNodes.length&&3===this.childNodes[0].nodeType){var n=this.innerText;n&&(n=n.replace(/\[\[/g,"{{"),n=n.replace(/\]\]/g,"}}"),this.innerText=n)}}),r=i.innerHTML,t.getPageDOM().innerHTML="",d.call(this,r)}m(t.getPageDOM(),"pageCreate")}function i(){g.call(this,this.transition,"reset",0)}function o(){function e(e){console.assert(M,"------------------------------onTransitionAndAnimationEnd"),"webkitTransitionEnd"===e.type&&"page"!==e.target.getAttribute("ct-data-role")||t.pageTransitionType&&("start"===t.pageTransitionType?(delete t.pageTransitionType,u.call(t,e)):"finish"===t.pageTransitionType&&(delete t.pageTransitionType,c.call(t,e)))}var t=this;t.getPageJO().on({pageCreate:t.pageCreate.bind(t),pageBeforeShow:t.pageBeforeShow.bind(t),pageShow:t.pageShow.bind(t),pageAfterShow:t.pageAfterShow.bind(t),pageBeforePause:t.pageBeforePause.bind(t),pageAfterPause:t.pageAfterPause.bind(t),pageBeforeRestore:t.pageBeforeRestore.bind(t),pageRestore:t.pageRestore.bind(t),pageAfterRestore:t.pageAfterRestore.bind(t),pageBeforeDestroy:t.pageBeforeDestroy.bind(t),pageResult:t.pageResult.bind(t),pageAngularInjectorBefore:t.pageAngularInjectorBefore.bind(t),pageReceiver:t.pageReceiver.bind(t)}),t.getPageDOM().addEventListener("webkitTransitionEnd",e,!1),t.getPageDOM().addEventListener("webkitAnimationEnd",e,!1)}function s(e,t,r,i){function a(){n.requestAnimationFrame(function(){o.getPageJO().css({transform:"translate3d("+e+","+t+",0)","-webkit-transform":"translate3d("+e+","+t+",0)",transition:"transform "+r+"ms cubic-bezier(0.1,0.25,0.1,1)","-webkit-transition":"transform "+r+"ms cubic-bezier(0.1,0.25,0.1,1)"})})}var o=this;i&&i(),0==r?a():n.requestAnimationFrame(a)}function g(t,n,r,i){function a(){new RegExp(/.+left/g).exec(t)?c="100%":new RegExp(/.+right/g).exec(t)?c="-100%":new RegExp(/.+up/g).exec(t)?u="100%":new RegExp(/.+down/g).exec(t)&&(u="-100%"),0===t.indexOf("wx")&&0!==r?(delete e.getPageByIndex(C.length-2).pageTransitionType,s.call(e.getPageByIndex(C.length-2),0,0,r/2)):0===t.indexOf("push")&&0!==r&&(delete e.getPageByIndex(C.length-2).pageTransitionType,s.call(e.getPageByIndex(C.length-2),0,0,r)),0===t.indexOf("material")?0!==r&&(i&&i(),this.getPageDOM().classList.add("materialHide")):s.call(this,c,u,r,i)}function o(){0===t.indexOf("wx")&&0!==r?(delete e.getLastPage().pageTransitionType,new RegExp(/.+left/g).exec(t)?s.call(e.getLastPage(),"-20%",u,r/2):new RegExp(/.+right/g).exec(t)?s.call(e.getLastPage(),"20%",u,r/2):new RegExp(/.+up/g).exec(t)?s.call(e.getLastPage(),c,"-20%",r/2):new RegExp(/.+down/g).exec(t)&&s.call(e.getLastPage(),c,"20%",r/2)):0===t.indexOf("push")&&0!==r&&(delete e.getLastPage().pageTransitionType,new RegExp(/.+left/g).exec(t)?s.call(e.getLastPage(),"-100%",u,r):new RegExp(/.+right/g).exec(t)?s.call(e.getLastPage(),"100%",u,r):new RegExp(/.+up/g).exec(t)?s.call(e.getLastPage(),c,"-100%",r):new RegExp(/.+down/g).exec(t)&&s.call(e.getLastPage(),c,"100%",r)),0===t.indexOf("material")?0!==r&&(i&&i(),g.getPageDOM().classList.add("materialShow")):s.call(this,c,u,r,i)}var g=this,c=0,u=0;"reset"===n?a.call(g):o.call(g)}function c(t){var n=this;if(!("webkitTransitionEnd"===t.type&&"page"!==t.target.getAttribute("ct-data-role")||"webkitAnimationEnd"===t.type&&"page"!==t.target.getAttribute("ct-data-role"))){t.stopPropagation(),t.preventDefault(),n.getPageDOM().classList.remove("materialHide"),n.getPageDOM().classList.remove("active"),j.style.display="none",q=!1;var r=h(n.getPageId(),"ct-data-mode");if(-1===r.toLowerCase().indexOf("singleinstance")&&n.getPageDOM().parentNode.removeChild(n.getPageDOM()),C.length>1){var i=C.length-2;m(e.getPageByIndex(i).getPageDOM(),"pageAfterRestore");var r=h(n.getPageId(),"ct-data-mode");-1!==r.toLowerCase().lastIndexOf("result")&&n.resultIntent&&n.resultIntent.resultCode&&m(e.getPageByIndex(i).getPageDOM(),"pageResult",[n.resultIntent.resultCode,n.resultIntent.bundle])}C.pop(),n.pageTransitionEndCallback&&n.pageTransitionEndCallback()}}function u(t){var n=this;"webkitTransitionEnd"===t.type&&"page"!==t.target.getAttribute("ct-data-role")||"webkitAnimationEnd"===t.type&&"page"!==t.target.getAttribute("ct-data-role")||(t.stopPropagation(),t.preventDefault(),n.getPageDOM().classList.remove("materialShow"),e.getLastPage().getPageDOM().classList.remove("active"),j.style.display="none",q=!1,C.push(n),m(n.getPageDOM(),"pageAfterShow"),C.length>=2&&m(e.getPageByIndex(C.length-2).getPageDOM(),"pageAfterPause"),n.pageTransitionEndCallback&&n.pageTransitionEndCallback())}function l(){var e=this,t=e.getPageJO(),n=k.angular.element(t),r=n.injector(),i=n.scope();r.invoke(["$compile",function(e){e(t)(i),i.$digest()}])}function d(e){var t=this,n=t.getPageJO(),r=k.angular.element(n),i=r.injector(),a=r.scope();i.invoke(["$compile",function(t){n.append(t(e)(a))}])}function f(){return-1!=this.getPageDOM().outerHTML.indexOf("ct-ng-controller")}function p(e){return Object.assign(this,{id:e,pageId:e.substring(0,e.lastIndexOf("_")),transition:F}),r.call(this),i.call(this),this}return p.prototype={pageCreate:function(e){console.assert(M,"pageCreateParentByParent")},pageBeforeShow:function(e){console.assert(M,"pageBeforeShowByParent")},pageShow:function(e){console.assert(M,"pageShowByParent")},pageAfterShow:function(e){console.assert(M,"pageAfterShowByParent")},pageBeforePause:function(e){console.assert(M,"pageBeforePauseByParent")},pageAfterPause:function(e){console.assert(M,"pageAfterPauseByParent")},pageBeforeRestore:function(e){console.assert(M,"pageBeforeRestoreByParent")},pageRestore:function(e){console.assert(M,"pageRestoreByParent")},pageAfterRestore:function(e){console.assert(M,"pageAfterRestoreByParent")},pageBeforeDestroy:function(e){console.assert(M,"pageBeforeDestroyByParent")},pageResult:function(e,t,n){console.assert(M,"pageResult")},pageAngularInjectorBefore:function(e,t){console.assert(M,"pageAngularInjectorBefore")},pageReceiver:function(e,t){console.assert(M,"pageReceiver")},start:function(t,n){var r=this;q||(q=!0,r.pageTransitionType="start",r.pageTransitionEndCallback=n,0!==C.length&&m(e.getLastPage().getPageDOM(),"pageBeforePause"),m(r.getPageDOM(),"pageBeforeShow"),0!==t&&(j.style.display="block"),r.getPageDOM().classList.add("active"),r.getPageDOM().style.zIndex=++L,m(r.getPageDOM(),"pageShow"),g.call(r,r.transition,"show",0===t?0:B),0===t&&(C.push(r),q=!1,m(r.getPageDOM(),"pageAfterShow"),n&&n()))},finish:function(t,n,r){var i=this;if(!q){q=!0,i.pageTransitionType="finish",L--,i.pageTransitionEndCallback=n;var a=h(i.getPageId(),"ct-data-mode");-1===a.toLowerCase().indexOf("singleinstance")?m(i.getPageDOM(),"pageBeforeDestroy"):m(i.getPageDOM(),"pageAfterPause");var o=C.length-2;if(!(C.length>1)||r&&r.reload||m(e.getPageByIndex(o).getPageDOM(),"pageBeforeRestore"),0!==t&&(j.style.display="block"),!(C.length>1)||r&&r.reload||(e.getPageByIndex(o).getPageDOM().classList.add("active"),m(e.getPageByIndex(o).getPageDOM(),"pageRestore")),g.call(this,this.transition,"reset",0===t?0:B),0===t){i.getPageDOM().classList.remove("active"),q=!1;var a=h(i.getPageId(),"ct-data-mode");if(-1===a.toLowerCase().indexOf("singleinstance")&&i.getPageDOM().parentNode.removeChild(i.getPageDOM()),C.length>1&&(!r||!r.reload)){m(e.getPageByIndex(o).getPageDOM(),"pageAfterRestore");var a=h(i.getPageId(),"ct-data-mode");-1!==a.toLowerCase().lastIndexOf("result")&&i.resultIntent&&i.resultIntent.resultCode&&m(e.getPageByIndex(o).getPageDOM(),"pageResult",[i.resultIntent.resultCode,i.resultIntent.bundle])}C.length>1&&r&&r.reload?C.splice(o,1):C.pop(),n&&n()}}},getPageDOM:function(){return this._pDom},getPageJO:function(){return this._pJO||(this._pJO=t(this.getPageDOM())),this._pJO},getId:function(){return this.id},getPageId:function(){return this.pageId},setRequest:function(e,t){"mulitview"===a?n.mulitview.setRequest(function(){},function(){},e,t):this.requestIntent={requestCode:e||"",bundle:t||{}}},getRequest:function(t){if("mulitview"!==a)return e.getRequest(this);n.mulitview.getRequest(function(e){t&&t(e)},function(){})},setResult:function(e,t){"mulitview"===a?n.mulitview.setResult(function(){},function(){},e,t):this.resultIntent={resultCode:e||"",bundle:t||{}}},getResult:function(e){if("mulitview"!==a)return this.resultIntent;n.mulitview.getResult(function(t){e&&e(t)},function(){})},over:function(){"mulitview"===a?n.mulitview.over(function(){},function(){}):w(-1)}},p.prototype.constructor=p,p}(),W=function(){function r(){i(n.location.hash)}function i(t,r){var i="";if(t){i=-1!==t.indexOf("?")?t.substring(1,t.indexOf("?")):t.substring(1);var a=i.lastIndexOf("_");if(-1===a)return!1;var o=i.substring(0,a);if(!n.document.querySelector("[ct-data-role='page'],#"+o))return!1;m(n.document,"pageBeforeChange",[e.getUrlParam(t)])}else{if(m(n.document,"pageBeforeChange",[e.getUrlParam(t)]),e.getFirstPage().getPageId()!=e.getFirstPageId())return void f(e.getId(e.getFirstPageId())).done(function(e){e.start(B,function(){C.shift()})});i=e.getFirstPage().getId()}if(e.getPageById(i)){if(i==e.getLastPage().getId())return;for(var a=e.indexOfById(i),s=C.length-1;s>a;s--)s===a+1?e.getPageByIndex(s).finish(B):e.getPageByIndex(s).finish(0)}else f(i).done(function(t){t.start(B,function(){if(r&&r.reload&&C.length>1){var t=C.length-2,n=e.getPageByIndex(t);n&&n.finish(0,null,r)}})})}var o=d,s={startPage:function(r,o){function s(){if("mulitview"===a)n.mulitview.startPage(function(){},function(){},g,e.getUrlParam(r));else{var t,s=h(g,"ct-data-mode");if(-1!==s.toLowerCase().indexOf("single")){var u=v(g);-1===u?(t=-1!==s.indexOf("singleInstance")&&e.getSingleInstance(g)?e.getSingleInstance(g).getId():e.getId(g+c),o&&o.reload?(n.history.replaceState(null,"","#"+t),i("#"+t,o)):n.location.hash="#"+t):e.getPageByIndex(u)!=e.getLastPage()?w(-(C.length-1-u)):m(e.getLastPage().getPageDOM(),"pageShow")}else"standard"!==s&&"result"!==s||(t=e.getId(g+c),o&&o.reload?(n.history.replaceState(null,"","#"+t),i("#"+t,o)):n.location.hash="#"+t)}}var g="",c="";if(0!==r.indexOf("#")){var u=e.getUrlParam(r);g=u.pageId,delete u.pageId;var l=[];for(var d in u)u.hasOwnProperty(d)&&l.push(d+"="+u[d]);c=l.join("&")?"?"+l.join("&"):"",g in T?s():t.ajax({dataType:"text",url:r,success:function(e){if(T[g]=A(e),"mulitview"===a){var t={};t[g]=e,n.mulitview.addTemplateDB(function(){s()},function(){},t)}else s()},error:function(e,t,n){}})}else r=r.substring(1),-1!==r.indexOf("?")?(c=r.substring(r.indexOf("?")),g=r.substring(0,r.indexOf("?"))):g=r,s()},go:function(e){n.history.go(e)},back:function(){s.go(-1)},getParameter:function(){return t.extend({},s._parameter)},getResPath:function(e){return o[e]},loadAsyncScriptAndCss:function(e){for(var n=t.Deferred(),r=[],i=[],a=0,o=e.length;a<o;a++){var g=e[a].replace(/^\s|\s$/g,""),c=g.split("."),u="css"==c[c.length-1].toLowerCase(),l="js"==c[c.length-1].toLowerCase();u?i.push({url:g}):l&&r.push({url:g})}return t.when.apply(this,[s.syncLoadScript(r),s.syncLoadCss(i)]).done(function(){n.resolve()}).fail(function(){n.reject()}),n.promise()},syncLoadScript:function(e){function n(){a>=i?(t.ajaxSetup({cache:!1}),r.resolve()):t.getScript(e[a].url,function(){e[a].callback&&e[a].callback(),a++,n()})}var r=t.Deferred();t.ajaxSetup({cache:!0});var i=e.length,a=0;return n(),r.promise()},syncLoadCss:function(e){function n(){if(a>=i)r.resolve();else{var t=document.getElementsByTagName("head")[0],o=document.createElement("link");o.onload=function(){e[a].callback&&e[a].callback(),a++,n()},o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e[a].url),t.appendChild(o)}}var r=t.Deferred(),i=e.length,a=0;return n(),r.promise()}};return function(){n.addEventListener("hashchange",r,!1),t(n.document).on("pageBeforeChange",function(e,t){console.dirxml(t),s._parameter=t})}(),s}(),z=function(){function e(e){for(var t=[],n=0,i=r.length;n<i;n++)if(r[n].action==e.action&&r[n].categorys.length==e.categorys.length){for(var a=!0,o=0;o<e.categorys.length;o++)if(-1===r[n].categorys.indexOf(e.categorys[o])){a=!1;break}a&&t.push(r[n])}return t}var r=[];return{executeReceiverById:function(e,t){for(var n=0,i=r.length;n<i;n++){var a=r[n];a.innerReceiverId===e&&a.handler&&a.handler(t)}},registerReceiver:function(e,t){if(e&&t&&t.action){var i={action:t.action,categorys:t.categorys||[],handler:e,priority:t.priority||0};r.push(i),r.sort(function(e,t){var n=e.priority||0,r=t.priority||0;return n<r?1:n>r?-1:0}),"mulitview"===a&&n.mulitview.registerReceiver(function(e){i.innerReceiverId=e},function(){},{action:t.action,categorys:t.categorys||[],priority:t.priority||0})}},unregisterReceiver:function(e){if(e)for(var t=!1;;){for(var i=0,o=r.length;i<o;i++)if(r[i].handler===e){"mulitview"===a&&n.mulitview.unregisterReceiver(function(){},function(){},r[i].innerReceiverId),r.splice(i,1),t=!0;break}if(!t||0===r.length)break}},sendBroadcast:function(r){if(r)if("mulitview"===a)n.mulitview.sendBroadcast(function(){},function(){},r);else{var i=e(r);i=[].concat(i);for(var o=0,s=i.length;o<s;o++)i[o].handler&&i[o].handler(t.extend({},r))}},sendOrderedBroadcast:function(t){function r(e){if(0!=e.length){var t=e.shift();t&&(i++,o=!0,t.handler(s,{next:function(){o=!1,s.bundles.length!=i+1&&s.bundles.push({}),r(e)},putExtras:function(e){o&&(s.bundles.length===i+1&&s.bundles.pop(),s.bundles.push(e))}}))}}if("mulitview"===a)n.mulitview.sendOrderedBroadcast(function(){},function(){},t);else{var i=0,o=!1,s={action:t.action,categorys:t.categorys||[],bundles:[]};if(t){var g=e(t);g=[].concat(g),s.bundles.push(t.bundle||{}),r(g,s)}}}}}();return t.extend(e,{version:"1.0.0",Page:U,router:W,borasdcast:z,getUrlParam:function(e){var t=/^[^\?]+\?([\w\W]+)$/,n=/([^&=]+)=([\w\W]*?)(&|$)/g,r=t.exec(e),i={};if(r&&r[1])for(var a,o=r[1];null!=(a=n.exec(o));)i[a[1]]=decodeURI(a[2]);return i},namespaceToObj:function(e,t){if(t){for(var n=e||{},r=t.split("."),i=0,a=r.length;i<a;i++)n=n[r[i]];return n}},extend:function(){var e=function(){};return function(n,r){if(n&&r){e.prototype=r.prototype;var i=new e;t.extend(i,n.prototype),n.prototype=i,n.__super__=r.prototype,n.prototype.constructor=n}}}(),getClientWidth:function(){return N||(N=Math.max(n.document.body.clientWidth,n.document.documentElement.clientWidth,n.document.body.offsetWidth,n.document.documentElement.offsetWidth)),N},getClientHeight:function(){return $||($=Math.max(n.document.body.clientHeight,n.document.documentElement.clientHeight,n.document.body.offsetHeight,n.document.documentElement.offsetHeight)),$},getId:function(e){var t=e.indexOf("?");return-1!==t?e.substring(0,t)+"_"+(new Date).getTime()+e.substring(t):e+"_"+(new Date).getTime()},getFirstId:function(){var t=n.location.hash;return t?-1!=t.indexOf("?")?t.substring(1,t.indexOf("?")):t.substring(1):e.getId(e.getFirstPageId())},startPage:function(t,n){e.router.startPage(t,n)},getFirstPageId:function(){var e;for(var t in T){e=t;break}return e},getPageById:function(e){return C[this.indexOfById(e)]},indexOfById:function(e){for(var t=-1,n=0,r=C.length;n<r;n++)if(C[n].getId()===e){t=n;break}return t},getPageByIndex:function(e){return C[e]},getFirstPage:function(){return C[0]},getLastPage:function(){return C[C.length-1]},getParameter:function(){return e.router.getParameter()},getHistoryLength:function(){return C.length},getSingleInstance:function(e){return H||(H={}),H[e]},getRequest:function(t){if(0===C.length||1===C.length)return{};var n=e.indexOfById(t.getId());return n<=0||n>C.length-1?{}:C[C.length-2].requestIntent||{}},fireEvent:function(e,t,n){m(e,t,n)},executeReceiverById:function(t,n){e.borasdcast.executeReceiverById(t,n)},registerReceiver:function(t,n){e.borasdcast.registerReceiver(t,n)},unregisterReceiver:function(t){e.borasdcast.unregisterReceiver(t)},sendBroadcast:function(t){e.borasdcast.sendBroadcast(t)},sendOrderedBroadcast:function(t){e.borasdcast.sendOrderedBroadcast(t)}}),O()&&function(){S=k.angular.module(k.appName,["ngTouch"]),S.config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(e,t,n,r){S.register={controller:e.register,directive:t.directive,filter:n.register,factory:r.factory,service:r.service}}]),u&&u.register&&u.register(S,function(){l&&l.register&&l.register(S,function(){c&&c.register&&c.register(S,function(){})})})}(),!function(){return!(!_||!_.supportCordova)}()?(t(n.document).ready(b),n.addEventListener("DOMContentLoaded",b)):t.when(function(){var e=t.Deferred();return t(n.document).ready(function(){e.resolve()}),e.promise()}(),function(){var e=t.Deferred();return n.addEventListener("DOMContentLoaded",function(){e.resolve()}),e.promise()}(),function(){var e=t.Deferred();return n.document.addEventListener("deviceready",function(){e.resolve()}),e.promise()}()).done(function(){b(),m(n.document,"DOMContentAndDeviceReady")}).fail(function(){}),Element.prototype.getParentElementByTag=function(e){if(!e)return null;var t=null,n=this,r=function(){if(!(n=n.parentElement))return null;var i=n.tagName.toLocaleLowerCase();i==e?t=n:"body"==i?t=null:r()};return r(),t},Object.freeze(e||{})});